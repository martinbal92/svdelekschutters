---
const pathname = Astro.url.pathname;

const navLinks = [
  { href: '/', label: 'Home' },
  { href: '/over-ons/', label: 'Over ons' },
  { href: '/agenda/', label: 'Agenda' },
  { href: '/reglementen/', label: 'Reglementen' },
  { href: '/contact/', label: 'Contact' },
];

function isActive(href: string): boolean {
  if (href === '/') {
    return pathname === '/' || pathname === '';
  }
  return pathname.startsWith(href);
}
---

<header class="sticky top-0 z-50 bg-white shadow-sm">
  <div class="mx-auto max-w-6xl px-4">
    <div class="flex h-16 items-center justify-between">
      <!-- Logo + Club name -->
      <a href="/" class="flex items-center gap-3 text-xl font-bold text-navy-900">
        <img src="/images/logo.jpg" alt="Logo SV de Lekschutters" class="h-10 w-auto" />
        SV de Lekschutters
      </a>

      <!-- Desktop nav -->
      <nav class="hidden md:flex items-center gap-6" aria-label="Hoofdnavigatie">
        {navLinks.map((link) => (
          <a
            href={link.href}
            class:list={[
              'text-sm transition-colors duration-200',
              isActive(link.href)
                ? 'text-red-500 font-semibold'
                : 'text-navy-700 hover:text-red-500',
            ]}
            aria-current={isActive(link.href) ? 'page' : undefined}
          >
            {link.label}
          </a>
        ))}
      </nav>

      <!-- Hamburger button (mobile) -->
      <button
        id="menu-toggle"
        class="md:hidden flex flex-col justify-center items-center w-10 h-10 rounded-lg hover:bg-navy-50 transition-colors"
        aria-label="Menu openen"
        aria-expanded="false"
        aria-controls="mobile-menu"
      >
        <span class="hamburger-line block w-5 h-0.5 bg-navy-900 transition-all duration-300"></span>
        <span class="hamburger-line block w-5 h-0.5 bg-navy-900 transition-all duration-300 mt-1.5"></span>
        <span class="hamburger-line block w-5 h-0.5 bg-navy-900 transition-all duration-300 mt-1.5"></span>
      </button>
    </div>
  </div>

  <!-- Mobile menu -->
  <div
    id="mobile-menu"
    class="hidden md:hidden border-t border-navy-100"
  >
    <nav class="mx-auto max-w-6xl px-4 py-4 flex flex-col gap-3" aria-label="Mobiele navigatie">
      {navLinks.map((link) => (
        <a
          href={link.href}
          class:list={[
            'block py-2 px-3 rounded-lg text-sm transition-colors duration-200',
            isActive(link.href)
              ? 'text-red-500 font-semibold bg-warm-50'
              : 'text-navy-700 hover:text-red-500 hover:bg-warm-50',
          ]}
          aria-current={isActive(link.href) ? 'page' : undefined}
        >
          {link.label}
        </a>
      ))}
    </nav>
  </div>
</header>

<script>
  const toggle = document.querySelector('#menu-toggle');
  const menu = document.querySelector('#mobile-menu');

  if (toggle && menu) {
    toggle.addEventListener('click', () => {
      const isOpen = !menu.classList.contains('hidden');
      menu.classList.toggle('hidden');
      toggle.setAttribute('aria-expanded', String(!isOpen));
      toggle.setAttribute('aria-label', isOpen ? 'Menu openen' : 'Menu sluiten');
    });
  }
</script>
